"use strict";function initMap(){var a={lat:56.0782808,lng:92.9313757},b={zoom:17,center:a,gestureHandling:"greedy",disableDoubleClickZoom:!0},c=new google.maps.Map(document.querySelector(".contacts__map"),b);c.scrollwheel=!1;new google.maps.Marker({position:{lat:56.07823,lng:92.9313},map:c,title:"Siberia Motors",icon:{url:"img/map-pin-with-border.png",scaledSize:new google.maps.Size(56,80)}})}$(document).ready(function(){function a(){m.animate({opacity:0,top:"-220px"},800,function(){m.removeClass("modal-login--show").removeAttr("style"),n.JqNodeObject.removeClass("overlay--visible"),n.callerClassName=""})}function b(){$(this).scrollTop()>=100?(p.addClass("page-header__main--scroll"),r.addClass("page-header__top--scroll")):(p.removeClass("page-header__main--scroll"),r.removeClass("page-header__top--scroll"))}function c(){$(this).scrollTop()>=500&&!n.JqNodeObject.hasClass("overlay--visible")?s.addClass("scroll-top-button--visible"):s.hasClass("scroll-top-button--visible")&&s.removeClass("scroll-top-button--visible")}function d(a){var b=$(a.target);0!==u.find(b).length||u.is(b)||g()}function e(a){window.utils.isDeactivateEvent(a)&&g()}function f(){w.addClass("main-menu__dropdown--open"),v.addClass("main-menu__toggle-button--open")}function g(){w.removeClass("main-menu__dropdown--open"),v.removeClass("main-menu__toggle-button--open"),$(document).off("click",d),$(document).off("keydown",e)}function h(){B.animate({right:"-300px"},800,function(){B.removeClass("catalog__filtering--show").removeAttr("style"),n.JqNodeObject.removeClass("overlay--visible"),n.callerClassName=""})}function i(){E.animate({left:"-300px"},800,function(){E.removeClass("catalog__sorting--show").removeAttr("style"),n.JqNodeObject.removeClass("overlay--visible"),n.callerClassName=""})}function j(a,b){a.addClass("catalog__filter-block--active"),a.animate({"padding-bottom":"15px"},800,function(){a.removeAttr("style")}),b.animate({height:"toggle","padding-top":"toggle","padding-bottom":"toggle"},800)}function k(a,b){a.removeClass("catalog__filter-block--active"),a.animate({"padding-bottom":"toggle"},800,function(){a.removeAttr("style")}),b.animate({height:"toggle","padding-top":"toggle","padding-bottom":"toggle"},800,function(){b.removeAttr("style")})}function l(a){if($(a.target).off("blur",l),G.hasClass("main-menu__item-link--catalog-toggle-open")&&0===H.find(a.relatedTarget).length&&null!==a.relatedTarget)return void window.menuCatalogDropdown.close(H,function(){G.removeClass("main-menu__item-link--catalog-toggle-open")});$(a.relatedTarget).on("blur",l)}var m=$(".modal-login"),n={JqNodeObject:$(".overlay"),callerClassName:""},o=$(window);$(".page-header__login").click(function(a){a.preventDefault(),n.callerClassName=a.target.className,n.JqNodeObject.addClass("overlay--visible"),m.addClass("modal-login--show")}),$(".modal-login__close-button").click(function(){a()}),n.JqNodeObject.click(function(){switch(n.callerClassName){case"page-header__login":a(),o.scrollTop()>=600&&s.addClass("scroll-top-button--visible");break;case"catalog__sorting-filtering-mobile-control--filtering-menu":h();break;case"catalog__sorting-filtering-mobile-control--sorting-menu":i()}});var p=$(".page-header__main"),q=$(".page-header"),r=q.find(".page-header__top");o.on("scroll",b);var s=$(".scroll-top-button"),t=$("html, body");o.on("scroll",c),s.click(function(){o.off("scroll",c),t.animate({scrollTop:0},600,function(){s.removeClass("scroll-top-button--visible"),o.on("scroll",c)})});var u=$(".main-menu"),v=$(".main-menu__toggle-button"),w=$(".main-menu__dropdown");$(".page-content");v.click(function(){v.hasClass("main-menu__toggle-button--open")?(g(),$(document).off("click",d)):(f(),$(document).on("click",d),$(document).on("keydown",e))});var x=$(".catalog__view-control--list-view"),y=$(".catalog__view-control--grid-view"),z=$(".catalog__products");x.click(function(){x.removeClass("catalog__view-control--disable").addClass("catalog__view-control--active"),y.removeClass("catalog__view-control--active").addClass("catalog__view-control--disable"),z.removeClass("catalog__products--grid-view").addClass("catalog__products--list-view"),$(".catalog-product .catalog-product__photo").data("hover-image","zoom")}),y.click(function(){y.removeClass("catalog__view-control--disable").addClass("catalog__view-control--active"),x.removeClass("catalog__view-control--active").addClass("catalog__view-control--disable"),z.removeClass("catalog__products--list-view").addClass("catalog__products--grid-view"),$(".catalog-product .catalog-product__photo").data("hoverImage",null)});var A=$(".catalog__sorting-filtering-mobile-control--filtering-menu"),B=$(".catalog__filtering"),C=$(".catalog__filtering-close-button");A.click(function(a){B.addClass("catalog__filtering--show"),n.callerClassName=a.target.classList[1],n.JqNodeObject.addClass("overlay--visible")}),C.click(function(){h()});var D=$(".catalog__sorting-filtering-mobile-control--sorting-menu"),E=$(".catalog__sorting"),F=$(".catalog__sorting-close-button");D.click(function(a){E.addClass("catalog__sorting--show"),n.callerClassName=a.target.classList[1],n.JqNodeObject.addClass("overlay--visible")}),F.click(function(){i()}),function(){var a=$(".quantity-controls__button--minus"),b=$(".quantity-controls__field"),c=$(".quantity-controls__button--plus"),d=/[0-9]/;a.mousedown(function(b){function c(){var a=1;f>99?a=20:f>9&&(a=5),f-a>=1&&(f-=a,e.val(f))}if(0==b.originalEvent.button){var d=!0,e=$(this).next(),f=e.val(),g=$(this);if(!a.data("steppingQuantity"))return;if(f>1&&e.val(--f),d)var h=setInterval(c,200);g.mouseup(function(){d=!1,clearInterval(h),g.off("mouseup").off("mouseleave")}),g.mouseleave(function(){d=!1,clearInterval(h),g.off("mouseleave").off("mouseup")})}}),c.mousedown(function(a){function b(){var a=1,b=0;f>99?a=20:f>9&&(a=5),b=h-f,b<20&&(a=5),f+a>h&&(a=1),f<h&&(f+=a,e.val(f))}if(0==a.originalEvent.button){var d=!0,e=$(this).prev(),f=parseInt(e.val()),g=$(this),h=parseInt(g.data("topLimitCount"));if(!c.data("steppingQuantity"))return;if(f<h&&e.val(++f),d)var i=setInterval(b,200);g.mouseup(function(){d=!1,clearInterval(i),g.off("mouseup").off("mouseleave")}),g.mouseleave(function(){d=!1,clearInterval(i),g.off("mouseleave").off("mouseup")})}}),b.keydown(function(a){d.test(a.key)||1!==a.key.length||a.preventDefault()}),b.blur(function(){var a=$(this),b=parseInt(a.data("topLimitCount"));return a.val()?a.val()>b?void a.val(b):a.val()<1?void a.val(1):void 0:void a.val(1)})}(),function(){var a=$(".catalog__current-sort-value"),a=$(".catalog__sorting .select"),b=null,c=null,d=null,e=null,f=null;a.click(function(a){b=$(a.target);var g=$(a.currentTarget);c=g.find(".dropdown"),d=c.children(".dropdown__items"),e=d.next(),f=e.children(".scroll-track__bar"),g.hasClass("select--active")?(b.hasClass("select")||b.hasClass("catalog__current-sort-value"))&&window.dropdown.close(c,function(){g.removeClass("select--active")}):(g.addClass("select--active"),window.dropdown.open(c,function(){g.focus(),g.removeClass("select--active"),f.off("mousedown"),d.off("scroll")}))}),a.keydown(function(a){b=$(a.target),c=b.find(".dropdown"),window.utils.isActivateEvent(a)&&(b.hasClass("select--active")?(b.removeClass("select--active"),window.dropdown.close(c)):(b.addClass("select--active"),window.dropdown.open(c,function(){b.focus(),b.removeClass("select--active"),f.off("mousedown"),d.off("scroll")})))}),a.blur(function(a){b=$(a.target),c=b.find(".dropdown"),b.hasClass("select--active")&&window.dropdown.close(c,function(){b.removeClass("select--active")})})}(),window.dropdown=function(){function a(){f.addClass("dropdown--open"),$(document).on("keydown",c),$(document).on("click",d)}function b(){f.removeClass("dropdown--open"),$(document).off("keydown",c),$(document).off("click",d),"function"==typeof e&&e()}function c(a){window.utils.isDeactivateEvent(a)&&b()}function d(a){var c=$(a.target);0!==$(".select").find(c).length||c.hasClass("select")||b()}var e=null,f=null;return{open:function(b,c){e=c,f=b,a()},close:function(a,c){e=c,f=a,b()}}}(),$(".catalog__filter-block-title").click(function(){var a=$(this).parent(),b=a.find(".catalog__filter-block-items-wrapper"),c=b.children(".catalog__filter-block-items");c.next().children(".scroll-track__bar"),a.hasClass("catalog__filter-block--active")?k(a,b):(j(a,b),b.outerWidth(c[0].clientWidth-c[0].offsetWidth+b.outerWidth()))});var G=$(".main-menu__item-link--catalog-toggle"),H=$(".main-menu__catalog-dropdown");$(".main-menu__item:nth-of-type(2) .main-menu__item-link");G.click(function(a){a.preventDefault(),G.hasClass("main-menu__item-link--catalog-toggle-open")?(window.menuCatalogDropdown.close(H,function(){G.removeClass("main-menu__item-link--catalog-toggle-open")}),G.off("blur",l)):(G.addClass("main-menu__item-link--catalog-toggle-open"),window.menuCatalogDropdown.open(H,function(){G.focus(),G.removeClass("main-menu__item-link--catalog-toggle-open"),G.off("blur",l)}),G.on("blur",l))}),window.menuCatalogDropdown=function(){function a(){f.animate({height:"toggle"},300,function(){f.addClass("main-menu__catalog-dropdown--open").removeAttr("style")}),$(document).on("click",d),$(document).on("keydown",c)}function b(){f.animate({height:"toggle"},500,function(){f.removeClass("main-menu__catalog-dropdown--open").removeAttr("style")}),$(document).off("click",d),$(document).off("keydown",c),"function"==typeof e&&e()}function c(a){window.utils.isDeactivateEvent(a)&&b()}function d(a){var c=$(a.target);0!==$(".main-menu__dropdown").find(c).length||c.hasClass("main-menu__item-link--catalog-toggle")||b()}var e=null,f=null;return{open:function(b,c){e=c,f=b,a()},close:function(a,c){e=c,f=a,b()}}}(),$(".slider__items").slick({accessibility:!1,autoplay:!0,autoplaySpeed:7e3,arrows:!1,dots:!0,dotsClass:"slider__pagination",focusOnSelect:!1,speed:2500,pauseOnFocus:!1,responsive:[{breakpoint:768,settings:{vertical:!0,verticalSwiping:!0}}]}),function(){var a=$(".page-footer"),b=$(".page-wrapper"),c=a.height();o.outerWidth()>999&&c>194&&b.css({"padding-bottom":c+"px"}),o.resize(function(){o.outerWidth()>999&&c>194?b.css({"padding-bottom":c+"px"}):o.outerWidth()<1e3&&b.removeAttr("style")})}(),window.scrollingElement=function(){function a(){var a=d.height();e.height((c[0].clientHeight*a/c[0].scrollHeight).toFixed(7)),c.scroll(function(b){e.css({top:(c[0].scrollTop*a/c[0].scrollHeight).toFixed(7)+"px"})}),e.mousedown(function(f){var g=b(e[0]),h=f.pageY-g,i=b(d[0]);$(document).mousemove(function(b){var f=b.pageY-h-i,g=d.outerHeight()-e.outerHeight();return f<0?f=0:f>g&&(f=g),e.css({top:f+"px"}),c.scrollTop((f*c[0].scrollHeight/a).toFixed(7)),!1}),$(document).mouseup(function(){$(document).off("mousemove").off("mouseup")})})}function b(a){return a.getBoundingClientRect().top}var c=null,d=null,e=null;return function(b,f,g){c=b,d=f,e=g,a()}}(),function(){function a(){c.field.val()||c.missingValue.addClass("field-error--visible"),d.field.val()||d.missingValue.addClass("field-error--visible"),e.field.val()||e.missingValue.addClass("field-error--visible"),f.field.val()||f.missingValue.addClass("field-error--visible"),g.field.val()||g.missingValue.addClass("field-error--visible"),h.field.val()||h.missingValue.addClass("field-error--visible"),i.field.val()||i.missingValue.addClass("field-error--visible"),j.field.val()||j.missingValue.addClass("field-error--visible"),k.field.val()||k.missingValue.addClass("field-error--visible")}var b=$(".registration__form"),c={field:b.find("#registration-surname"),missingValue:b.find(".field-error--surname-missing-value"),editable:!1},d={field:b.find("#registration-first-name"),missingValue:b.find(".field-error--first-name-missing-value"),editable:!1},e={field:b.find("#registration-second-name"),missingValue:b.find(".field-error--second-name-missing-value"),editable:!1},f={field:b.find("#registration-town"),missingValue:b.find(".field-error--town-missing-value"),editable:!1},g={field:b.find("#registration-phone"),missingValue:b.find(".field-error--phone-missing-value"),editable:!1},h={field:b.find("#registration-email"),missingValue:b.find(".field-error--email-missing-value"),wrongFormat:b.find(".field-error--email-wrong-format"),editable:!1},i={field:b.find("#registration-login"),missingValue:b.find(".field-error--login-missing-value"),editable:!1},j={field:b.find("#registration-password"),missingValue:b.find(".field-error--password-missing-value"),short:b.find(".field-error--password-short"),editable:!1},k={field:b.find("#registration-repeat-password"),missingValue:b.find(".field-error--repeat-password-missing-value"),notEqual:b.find(".field-error--password-not-equal"),editable:!1},l=b.find(".password-size"),m=/.+@.+\..+/i;g.field.mask("+7 (999) 999-9999"),b.submit(function(c){window.utils.checkEmptyFields(b)>0&&(c.preventDefault(),a())}),c.field.on("input",function(){c.editable=!0,c.field.val()&&c.missingValue.hasClass("field-error--visible")&&(c.missingValue.removeClass("field-error--visible"),c.field.removeClass("input-field--error"))}),d.field.on("input",function(){d.editable=!0,d.field.val()&&d.missingValue.hasClass("field-error--visible")&&(d.missingValue.removeClass("field-error--visible"),d.field.removeClass("input-field--error"))}),e.field.on("input",function(){e.editable=!0,e.field.val()&&e.missingValue.hasClass("field-error--visible")&&(e.missingValue.removeClass("field-error--visible"),e.field.removeClass("input-field--error"))}),f.field.on("input",function(){f.editable=!0,f.field.val()&&f.missingValue.hasClass("field-error--visible")&&(f.missingValue.removeClass("field-error--visible"),f.field.removeClass("input-field--error"))}),g.field.on("keydown",function(){g.editable=!0,g.field.val()&&g.missingValue.hasClass("field-error--visible")&&(g.missingValue.removeClass("field-error--visible"),g.field.removeClass("input-field--error"))}),h.field.on("input",function(){var a=h.field.val().length;h.editable=!0,h.field.val()&&h.missingValue.hasClass("field-error--visible")?(h.missingValue.removeClass("field-error--visible"),h.field.removeClass("input-field--error")):h.wrongFormat.hasClass("field-error--visible")&&m.test(h.field.val())?(h.wrongFormat.removeClass("field-error--visible"),h.field.removeClass("input-field--error")):m.test(h.field.val())||0===a?0===a&&(h.wrongFormat.removeClass("field-error--visible"),h.missingValue.addClass("field-error--visible"),h.field.addClass("input-field--error")):(h.wrongFormat.addClass("field-error--visible"),h.field.addClass("input-field--error"))}),i.field.on("input",function(){registrationlogin.editable=!0,i.field.val()&&i.missingValue.hasClass("field-error--visible")&&(i.missingvalue.removeClass("field-error--visible"),i.field.removeClass("input-field--error"))}),j.field.on("input",function(){var a=j.field.val().length;j.editable=!0,j.field.val()&&j.missingValue.hasClass("field-error--visible")&&(j.missingValue.removeClass("field-error--visible"),j.field.removeClass("input-field--error")),a>0&&a<8?(j.short.addClass("field-error--visible"),j.field.addClass("input-field--error"),l.text(window.utils.getRightEnding(a,["символ","символа","символов"]))):a>7?(j.short.removeClass("field-error--visible"),j.field.removeClass("input-field--error")):0===a&&(j.short.removeClass("field-error--visible"),j.missingValue.addClass("field-error--visible"))}),k.field.on("input",function(){k.editable=!0,k.field.val()&&k.missingValue.hasClass("field-error--visible")&&(k.missingValue.removeClass("field-error--visible"),k.field.removeClass("input-field--error")),k.field.val()!==j.field.val()?(k.notEqual.addClass("field-error--visible"),k.field.addClass("input-field--error")):(k.notEqual.removeClass("field-error--visible"),k.field.removeClass("input-field--error"))}),c.field.blur(function(){!c.field.val()&&c.editable&&(c.missingValue.addClass("field-error--visible"),c.field.addClass("input-field--error"))}),d.field.blur(function(){!d.field.val()&&d.editable&&(d.missingValue.addClass("field-error--visible"),d.field.addClass("input-field--error"))}),e.field.blur(function(){!e.field.val()&&e.editable&&(e.missingValue.addClass("field-error--visible"),e.field.addClass("input-field--error"))}),f.field.blur(function(){!f.field.val()&&f.editable&&(f.missingValue.addClass("field-error--visible"),f.field.addClass("input-field--error"))}),g.field.blur(function(){!g.field.val()&&g.editable&&(g.missingValue.addClass("field-error--visible"),g.field.addClass("input-field--error"))}),h.field.blur(function(){!h.field.val()&&h.editable?(h.wrongFormat.removeClass("field-error--visible"),h.missingValue.addClass("field-error--visible"),h.field.addClass("input-field--error")):!m.test(h.field.val())&&h.editable?(h.wrongFormat.addClass("field-error--visible"),h.field.addClass("input-field--error")):m.test(h.field.val())&&h.editable&&(h.wrongFormat.removeClass("field-error--visible"),h.field.removeClass("input-field--error"))}),i.field.blur(function(){!i.field.val()&&i.editable&&(i.missingValue.addClass("field-error--visible"),i.field.addClass("input-field--error"))}),j.field.blur(function(){!j.field.val()&&j.editable&&(j.missingValue.addClass("field-error--visible"),j.field.addClass("input-field--error"))}),k.field.blur(function(){!k.field.val()&&k.editable&&(k.notEqual.removeClass("field-error-visible"),k.missingValue.addClass("field-error--visible"),k.field.addClass("input-field--error"))});var n=$(".registration__input-field-toggle-password");n.click(function(){n.hasClass("registration__input-field-toggle-password--show")?(n.removeClass("registration__input-field-toggle-password--show").addClass("registration__input-field-toggle-password--hide").attr("title","Скрыть пароль"),j.field.attr("type","text")):(n.addClass("registration__input-field-toggle-password--show").removeClass("registration__input-field-toggle-password--hide").attr("title","Показать пароль"),j.field.attr("type","password"))})}(),function(){function a(){e.addClass("page-header__profile--active"),f.addClass("dropdown--open"),$(document).on("click",c)}function b(){e.removeClass("page-header__profile--active"),f.removeClass("dropdown--open"),$(document).off("click",c)}function c(a){var c=$(a.target);0!==d.find(c).length||d.is(c)||b()}var d=$(".page-header__user-block"),e=d.find(".page-header__profile"),f=d.find(".dropdown");e.click(function(){e.hasClass("page-header__profile--active")?b():a()})}(),function(){var a={CLOSE:"Закрыть",NEXT:"Следующая фотография",PREV:"Предыдущая фотография",ERROR:"Запрашиваемый материал не может быть загружен. <br/> Пожалуйста, повторите попытку позже.",PLAY_START:"Начать показ слайдов",PLAY_STOP:"Остановить показ слайдов",FULL_SCREEN:"Полный экран",THUMBS:"Миниатюры"},b=$(".product-card__main-photos-slider"),c=$(".product-card__thumbnails-slider");b.slick({accessibility:!1,arrows:!0,focusOnSelect:!1,speed:500,appendArrows:".product-card__main-photos-slider-controls",prevArrow:'<div class="product-card__main-photos-slider-controls-prev"></div>',nextArrow:'<div class="product-card__main-photos-slider-controls-next"></div>'}),c.slick({accessibility:!1,arrows:!0,focusOnSelect:!1,speed:500,appendArrows:".product-card__thumbnails-slider-controls",prevArrow:'<div class="product-card__thumbnails-slider-controls-prev"></div>',nextArrow:'<div class="product-card__thumbnails-slider-controls-next"></div>',slidesToScroll:1,slidesToShow:5,responsive:[{breakpoint:1e3,settings:{slidesToShow:4}}]}),$().fancybox({selector:'[data-fancybox="main-photos"]:not(.slick-cloned)',loop:!0,toolbar:!1,transitionEffect:"slide",transitionDuration:800,animationEffect:"zoom",lang:"ru",i18n:{ru:a},backFocus:!1}),$().fancybox({selector:'[data-fancybox="thumbnails"]:not(.slick-cloned)',loop:!0,toolbar:!1,transitionEffect:"slide",transitionDuration:800,animationEffect:"zoom",lang:"ru",i18n:{ru:a},backFocus:!1}),$(".product-card__thumbnails-photo").mouseover(function(){var a=$(this);b.slick("slickSetOption","speed",100),b.slick("slickGoTo",a.data("slickIndex"),!1)}),$(".product-card__thumbnails-photo").mouseleave(function(){b.slick("slickSetOption","speed",500)})}(),function(){function a(){o.outerWidth()>767&&b.find(".product-card__detailed-info-content--visible").removeClass("product-card__detailed-info-content--visible").end().find(".product-card__detailed-"+e+" .product-card__detailed-info-content").addClass("product-card__detailed-info-content--visible")}var b=$(".product-card__detailed-info"),c=$(".product-card__nav-tabs-item"),d=$(".product-card__detailed-info-title"),e="description";c.click(function(){var a=$(this),c=e=a.data("tabType");a.hasClass("product-card__nav-tabs-item--active")||(a.addClass("product-card__nav-tabs-item--active").siblings(".product-card__nav-tabs-item--active").removeClass("product-card__nav-tabs-item--active"),b.find(".product-card__detailed-info-content--visible").removeClass("product-card__detailed-info-content--visible").end().find(".product-card__detailed-"+c+" .product-card__detailed-info-content").addClass("product-card__detailed-info-content--visible").end().find(".product-card__detailed-info-title--active").removeClass("product-card__detailed-info-title--active").next().removeClass("product-card__detailed-info-content--visible"),b.find('.product-card__detailed-info-title[data-info-title-type="'+c+'"]').addClass("product-card__detailed-info-title--active").next().addClass("product-card__detailed-info-content--visible"))}),d.click(function(){var a=$(this);a.hasClass("product-card__detailed-info-title--active")?a.removeClass("product-card__detailed-info-title--active").next().slideUp(700,function(){$(this).removeAttr("style").removeClass("product-card__detailed-info-content--visible")}):a.addClass("product-card__detailed-info-title--active").next().slideDown(700,function(){$(this).removeAttr("style").addClass("product-card__detailed-info-content--visible")})}),o.resize(a)}(),function(){$('a[data-hover-image="zoom"]').mouseover(function(){if(o.outerWidth()>767&&"zoom"==$(this).data("hoverImage")){var a=$(this),b=a.children("img"),c=b.attr("src"),d=b[0].naturalWidth,e=b[0].naturalHeight,f=(d/e).toFixed(7),g=0,h=0;d>260?(g=260,h=g/f):e>300?(h=300,g=h*f):(g=d,h=e),a.wrap('<div class="hover-image-wrapper"></div>'),a.before('<div class="hover-image-wrapper__inner"><img src="'+c+'" alt="" width="'+g+'" height="'+h+'"></div>');var i=a.prev();i[0].getBoundingClientRect().left<0&&i.addClass("hover-image-wrapper__inner--right"),i.css({top:"-"+(i.outerHeight()-a.height())/2+"px"}),a.mouseout(function(){var b=a.prev();a.off("mouseout"),b.fadeOut(400,function(){b.remove(),a.unwrap()})})}})}(),function(){$(".order__content").each(function(){var a=$(this),b=a.children(".order__content-item:first")[0].clientHeight;a.css({height:b+"px"})}),$(".order__visibility-toggle").click(function(){var a=$(this),b=a.siblings(".order__content"),c=b.children(".order__content-item:first")[0].clientHeight;"show"==a.data("toggleVisibility")?(a.text("Скрыть"),a.data("toggleVisibility","hide"),b.animate({height:b[0].scrollHeight+"px"},500,function(){b.addClass("order__content--show")})):(a.text("Показать остальные товары ("+a.data("orderHiddenItemCount")+")"),a.data("toggleVisibility","show"),b.animate({height:c+"px"},500,function(){b.removeClass("order__content--show")}))})}(),function(){$(".ordering__order-content-title").click(function(){var a=$(this);a.hasClass("ordering__order-content-title--active")?a.removeClass("ordering__order-content-title--active").next().slideUp(500):a.addClass("ordering__order-content-title--active").next().slideDown(500)})}(),function(){function a(){c.field.val()||c.missingValue.addClass("field-error--visible"),d.field.val()||d.missingValue.addClass("field-error--visible")}var b=$(".modal-login__login-form"),c={field:b.find("#login-identifier"),missingValue:b.find(".field-error--login-identifier-missing-value")},d={field:b.find("#login-password"),missingValue:b.find(".field-error--login-password-missing-value")};b.submit(function(c){window.utils.checkEmptyFields(b)>0&&(c.preventDefault(),a(),b.height()%2==1&&b.height(b.height()+1))}),c.field.on("input",function(){c.field.val()&&c.missingValue.hasClass("field-error--visible")&&(c.missingValue.removeClass("field-error--visible"),c.field.removeClass("input-field--error"))}),d.field.on("input",function(){d.field.val()&&d.missingValue.hasClass("field-error--visible")&&(d.missingValue.removeClass("field-error--visible"),d.field.removeClass("input-field--error"))})}(),function(){function a(){c.field.val()||c.missingValue.addClass("field-error--visible"),d.field.val()||d.missingValue.addClass("field-error--visible")}var b=$(".login__form"),c={field:b.find("#login-identifier"),missingValue:b.find(".field-error--login-identifier-missing-value")},d={field:b.find("#login-password"),missingValue:b.find(".field-error--login-password-missing-value")};b.submit(function(c){window.utils.checkEmptyFields(b)>0&&(c.preventDefault(),a())}),c.field.on("input",function(){c.field.val()&&c.missingValue.hasClass("field-error--visible")&&(c.missingValue.removeClass("field-error--visible"),c.field.removeClass("input-field--error"))}),d.field.on("input",function(){d.field.val()&&d.missingValue.hasClass("field-error--visible")&&(d.missingValue.removeClass("field-error--visible"),d.field.removeClass("input-field--error"))})}(),$(".dropdown__item--logout a").click(function(a){a.preventDefault(),$.ajax({url:"/logout.php",success:function(a){window.location.href=a}})}),$(".modal-login__login-form").submit(function(a){var b=$(this);a.preventDefault(),$.ajax({type:b.attr("method"),url:b.attr("action"),data:b.serialize()}).done(function(a){window.location.href=a})}),$(".footer-navigation__show-more-button").click(function(){}),$(".catalog-product__buy").click(function(){var a=$(this),b=a.parent().find(".quantity-controls__field").val();"in-cart"!=a.data("catalogBtn")&&"not-available"!=a.data("catalogBtn")&&$.ajax({type:"post",url:a.data("url"),data:{uid:a.data("uid"),count:b}}).done(function(b){b>0&&($(".page-header__user-item--cart").addClass("page-header__user-item--cart-not-empty").children(".page-header__user-item-cart-text").text(b),a.addClass("catalog-product__buy--in-cart").data("catalogBtn","in-cart").data("url","/cart.php").text("В корзине"),console.log(b))})}),$(".catalog-product__buy").click(function(){"in-cart"==$(this).data("catalogBtn")&&(window.location.href=$(this).data("url"))}),$(".cart-product__remove-button").click(function(){var a=$(this);"false"!=a.data("btnAvailable")&&(a.data("btnAvailable","false"),$.ajax({type:"post",url:a.data("url"),data:{uid:a.data("uid")}}).done(function(b){b=$.parseJSON(b),b.sumCount>0?$(".page-header__user-item--cart").addClass("page-header__user-item--cart-not-empty").children(".page-header__user-item-cart-text").text(b.sumCount):$(".page-header__user-item--cart").removeClass("page-header__user-item--cart-not-empty").children(".page-header__user-item-cart-text").text("Корзина");var c=$(".cart__summary-info-total-price");c.html(parseInt(c.text())-b.price*b.count+' <span class="currency-ruble">₽</span>'),$(".cart-product").filter(function(){return $(this).has(a).length>0}).fadeOut(500,function(){$(this).remove(),0==b.sumCount&&($(".cart__products").remove(),$(".cart__order-block").remove(),$(".cart__inner").append('<div class="cart__empty"><h3 class="cart__empty-title">Ваша корзина пуста</h3><p  class="cart__empty-description">Перейдите в <a class="cart__empty-link" href="/catalog.php?category=1&season=summer">каталог</a>, чтобы начать покупки.</p></div>'))})}))}),$(".cart-product__quantity-control-plus").click(function(){var a=$(this).prev(),b=parseInt(a.val()),c=$(this),d=parseInt(c.data("topLimitCount"));c.data("btnAvailable")&&b<d&&(a.val(++b),c.data("btnAvailable","false"),$.ajax({type:"post",url:"cart/change_quantity_product.php",data:{uid:c.data("uid"),count:b}}).done(function(a){a=$.parseJSON(a),console.log(a),c.data("btnAvailable","true"),$(".page-header__user-item--cart").children(".page-header__user-item-cart-text").text(a.sumCount);var b=$(".cart__summary-info-total-price");b.html(parseInt(b.text())+a.price*a.differenceCount+' <span class="currency-ruble">₽</span>')}))}),$(".cart-product__quantity-control-minus").click(function(){var a=$(this).next(),b=parseInt(a.val()),c=$(this);c.data("btnAvailable")&&b>1&&(a.val(--b),c.data("btnAvailable","false"),$.ajax({type:"post",url:"cart/change_quantity_product.php",data:{uid:c.data("uid"),count:b}}).done(function(a){a=$.parseJSON(a),console.log(a),c.data("btnAvailable","true"),$(".page-header__user-item--cart").children(".page-header__user-item-cart-text").text(a.sumCount);var b=$(".cart__summary-info-total-price");b.html(parseInt(b.text())+a.price*a.differenceCount+' <span class="currency-ruble">₽</span>')}))}),$(".cart-product__quantity-control-field").change(function(){var a=$(this),b=parseInt(a.val());console.log(a),a.data("fieldAvailable")&&(b<1&&(b=1),a.data("fieldAvailable","false"),$.ajax({type:"post",url:"cart/change_quantity_product.php",data:{uid:a.data("uid"),count:b}}).done(function(b){b=$.parseJSON(b),console.log(b),a.data("fieldAvailable","true"),$(".page-header__user-item--cart").children(".page-header__user-item-cart-text").text(b.sumCount);var c=$(".cart__summary-info-total-price");c.html(parseInt(c.text())+b.price*b.differenceCount+' <span class="currency-ruble">₽</span>')}))}),$(".cart__to-order-button").click(function(){window.location.href=$(this).data("url")}),$(".ordering__next").click(function(){var a=$(".ordering__total-price-value").text();$.ajax({type:"post",url:"/ordering.php",data:{step:"next",totalPrice:a}}).done(function(a){window.location.href="",console.log(a)})}),$(".ordering__back").click(function(){$.ajax({type:"post",url:"/ordering.php",data:{step:"back"}}).done(function(a){window.location.href="",console.log(a)})}),$(".dropdown__item-label--sort").click(function(){var a=$(this),b=window.location.search.slice(1).split("&"),c=1;b.forEach(function(a,c){b[c]=a.split("=")}),b.forEach(function(a){"page"==a[0]&&(c=a[1])}),console.log(b),$.ajax({type:"get",url:"/includes/sorting_control.php",data:{category:b[0][1],season:b[1][1],page:c,sortType:a.data("sort")}}).done(function(b){b=$.parseJSON(b),$(".catalog__current-sort-value").next().removeClass("dropdown--open").parent().removeClass("select--active"),"name-asc"==a.data("sort")?$(".catalog__current-sort-value").text("по наименованию"):"price-asc"==a.data("sort")?$(".catalog__current-sort-value").text("по возрастанию цены"):"price-desc"==a.data("sort")&&$(".catalog__current-sort-value").text("по убыванию цены"),$(".catalog-product").remove(),$.each(b,function(a,b){
$(".catalog__products-inner").append('<div class="catalog-product"><div class="catalog-product__left-content"><a class="catalog-product__photo" href="product.php?uid='+b.uid+'" data-hover-image="zoom"><img src="'+b.paths+'" alt="" width="90" height="90"></a><div class="catalog-product__info"><h2 class="catalog-product__title"><a href="product.php?uid='+b.uid+'">'+b.name+'</a></h2><p class="catalog-product__description">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum vitae risus pharetra, placerat dui quis, consectetur lacus. Pellentesque euismod nunc eu nulla volutpat, nec imperdiet ex volutpat. Morbi dictum ullamcorper vestibulum. Pellentesque sit amet nibh sed est efficitur fermentum.</p></div><span class="catalog-product__price">'+b.price+' <span class="currency-ruble">₽</span></span></div><div class="catalog-product__right-content"><span class="catalog-product__exist-block">В наличии: <span class="catalog-product__in-stock">'+b.stock+'</span> шт.</span><div class="quantity-controls  catalog-product__quantity-controls"><button class="quantity-controls__button  quantity-controls__button--minus  catalog-product__quantity-control-minus" title="Уменьшить" data-stepping-quantity="true">Уменьшить</button><input class="quantity-controls__field  catalog-product__quantity-control-field" type="text" value="1" data-top-limit-count="'+b.stock+'"><button class="quantity-controls__button  quantity-controls__button--plus  catalog-product__quantity-control-plus" title="Увеличить" data-top-limit-count="'+b.stock+'" data-stepping-quantity="true">Увеличить</button></div><button class="button  catalog-product__buy" type="button" data-url="cart/add_product.php" data-uid="'+b.uid+'">Купить</button></div></div>')}),console.log(b)})}),$(".page-header__search").submit(function(a){var b=$(".page-header__search-field"),c="search"+b.val();b.val()?$.ajax({type:"post",url:"includes/search.php",data:c}).done(function(a){console.log(a)}):a.preventDefault()}),window.utils=function(){return{isActivateEvent:function(a){return 13===a.keyCode},isDeactivateEvent:function(a){return 27===a.keyCode},getRightEnding:function(a,b){var c="";if(a>10&&a<15)return a+" "+b[2];switch(a%10){case 1:c=a+" "+b[0];break;case 2:case 3:case 4:c=a+" "+b[1];break;default:c=a+" "+b[2]}return c},checkEmptyFields:function(a){return a.find(".input-field").filter(function(){return!this.value}).addClass("input-field--error").length}}}()});